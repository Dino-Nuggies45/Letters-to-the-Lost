<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Letters to the Lost</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="desktop" class="desktop">
    <div class="desktop-icon" id="lettersIcon" onclick="openApp('letters')">
      <div class="icon-img">ğŸ’Œ</div>
      <div class="icon-label">Letters to the Lost</div>
    </div>
    <div class="desktop-icon" onclick="openApp('dice')">
      <div class="icon-img">ğŸ²</div>
      <div class="icon-label">Tavern Dice</div>
    </div>
  </div>
  <button id="resetButton" onclick="resetStory()" style="position: absolute; top: 1rem; left: 1rem; z-index: 999;">
  ğŸ”„ Reset Story
  </button>
 
  <div id="lettersApp" class="app-window">
    <div class="app-header">
      <span>ğŸ’Œ Letters to the Lost</span>
      <button onclick="confirmClose()">âŒ</button>
    </div>
    <div class="dm-container">
      <div id="messageHistory" class="history"></div>
      <div id="inputSection" class="input-section"></div>
    </div>
  </div>

  <div id="timelineViewer" class="hidden">
    <h2>Timeline Viewer</h2>
    <div id="timelineLog" style="max-height: 70vh; overflow-y: auto;"></div>
    <button onclick="closeTimeline()">Back</button>
  </div>


    <button id="timelineButton" class="hidden" onclick="openTimeline()" style="position: absolute; top: 1rem; right: 1rem; z-index: 999;">
      ğŸ“œ View Timeline
    </button>
    <div id="statPanel" class="hidden" style="position: fixed; top: 0; left: 0; height: 100vh; width: 160px; background: rgba(0, 0, 0, 0.85); color: white; padding: 1rem; z-index: 9998; font-family: monospace;">
    <h3 style="margin-top: 0;">Your State</h3>
    <div>
      <div>Hope</div>
      <div class="stat-bar" id="hopeBar" style="background: #0af; height: 8px; width: 0%; margin-bottom: 1rem;"></div>
    </div>
    <div>
      <div>Regret</div>
      <div class="stat-bar" id="regretBar" style="background: #f33; height: 8px; width: 0%; margin-bottom: 1rem;"></div>
    </div>
    <div>
      <div>Obsession</div>
      <div class="stat-bar" id="obsessionBar" style="background: #a0f; height: 8px; width: 0%; margin-bottom: 1rem;"></div>
    </div>
  </div>
  <div id="choiceHistoryModal" class="hidden" style="
    position: fixed;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    width: 80vw;
    max-width: 600px;
    max-height: 60vh;
    background: #222;
    color: white;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.7);
    padding: 1rem;
    overflow-y: auto;
    z-index: 10000;
  ">
    <h2>Choice History</h2>
    <div id="choiceHistoryContent" style="font-family: monospace; white-space: pre-wrap;"></div>
    <button onclick="toggleChoiceHistory()" style="margin-top: 1rem;">Close</button>
  </div>

  <button onclick="toggleChoiceHistory()" style="position: absolute; top: 3rem; right: 1rem; z-index: 9999;">
    ğŸ“œ Choice History
  </button>

  <button onclick="toggleStatPanel()" style="position: absolute; bottom: 1rem; left: 1rem; z-index: 9999;">ğŸ“Š Stats</button>

  <script src="script.js"></script>
</body>
</html>